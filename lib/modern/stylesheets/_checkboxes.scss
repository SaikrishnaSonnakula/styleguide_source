$checkbox-border-width: 2px;
$checkbox-size-mobile: 20px;
$enabled-color: color("dolphin");
$disabled-color: color("graphite");

@mixin checkbox($class, $size, $label-size: $base-font-size) {
  [type="checkbox"].#{$class}:not(:checked),
  [type="checkbox"].#{$class}:checked {
    // hide the real checkbox
    position: absolute;
    left: -9999px;

    & + label {
      margin: $size/2 0 0 0;
      color: $enabled-color;
      cursor: pointer;
      display: inline-block;
      font-size: $label-size;
      position: relative;
      padding-left: $size + $small-spacing;
      padding-top: $checkbox-border-width;
      min-width: $size;

      &.-screenreader {
	padding-left: 0;
      }

      &:before {
	overflow: hidden;
	content: '';
	z-index: $midground;
	position: absolute;
	top: $checkbox-border-width;
	left: $checkbox-border-width;
	width: $size;
	height: $size;
	border: $checkbox-border-width solid $enabled-color;
	border-radius: $checkbox-border-width;
	background-color: $enabled-color;

	&:hover {
	  border-color: $enabled-color;
	}
      }

      &:after {
	@include icon-for("checkmark");
	z-index: $midground;
	position: absolute;
	top: $checkbox-border-width;
	left: (($size/2) + $checkbox-border-width)/2;
	font-size: $size * 0.65;
	background-color: $enabled-color;
	color: white;
      }
    }

    &:focus {
      & + label:before {
	  border: $checkbox-border-width solid $enabled-color;
      box-shadow: 0 0 0 2pt rgba(123, 183, 246, 0.8);
      }
    }
  }

  [type="checkbox"].#{$class}:not(:checked) + label:before {
    background-color: white;
  }

  //disabled
  [type="checkbox"].#{$class}:disabled:checked + label:before {
    border: $checkbox-border-width solid $disabled-color;
    background-color: $disabled-color;
  }

  [type="checkbox"].#{$class}:disabled:not(:checked) + label:before,
  [type="checkbox"].#{$class}:disabled:checked + label:before {
    border: $checkbox-border-width solid $disabled-color;
  }

  [type="checkbox"].#{$class}:disabled:checked + label:after {
    background-color: $disabled-color;
    color: white;
  }

  [type="checkbox"].#{$class}:disabled + label {
    cursor: not-allowed !important;
  }

  [type="checkbox"].#{$class}:not(:checked) + label:after {
    opacity: 0;
  }

  [type="checkbox"].#{$class}:checked + label:after {
    opacity: 1;
  }
}

@include checkbox('form-control', $checkbox-size-mobile);
